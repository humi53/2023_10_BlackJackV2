# BlackJack (Aenean) V2
- 콘솔 BlackJack 프로그램.
- 재설계를 하고 최대한 반영하여 완성.

## 프로젝트 날짜
- 시작일 : 2023-10-26

## 계획과 목적
- 가장짧은시간에 완성하기
- 공통상수를 가지고 있는 Config.
- 게임 상태에 따라 진행을 하게 만든다
  - 게임 상태를 먼저 정의 필요. `게임상태변수`
- 게임을 진행하는 `서비스`와 출력하는 `출력부`를 최대한 분리.
  - 의존성 주입과 제어권은 어느쪽으로 붙일것인가.
  - 초기셋팅
  - Controller
  - Service는 View 와 DataModel을 가지고 있는다
  - View는 DataModel을 가지고 있는다.
  - Service에서 DataModel의 Data를 변경하고 View에 paint() 신호를 보낸다.
- 시스템반복과 게임반복의 분리.
  + 화면출력부의 반복. (시스템상태로 처리) `시스템상태변수`
- 출력반복을 위한
  + 출력상태를 따로 저장할것인가, 시스템상태에 남길것인가.
  + 시스템상태는 고유의 상태로 남겨져 있어야 될것같다. 기능상분리가 좋다고 판단 `출력상태변수`
  + `게임상태변수`의 기능을 축소하고 각플레이어의 상태를 위한`플레이어상태변수`가 필요하다고 생각된다.
    * `플레이어진행`과 `플레이어완료` 상태가 각각 필요하다 판단됨.
    * `플레이어진행` : 화면출력과 플레이진행과 관련됨.
    * `플레이어완료` : 결과 계산과 금액정산과 관련됨 (BLACKJACK 등등)
  
## 게임용어정리
- 배팅 : 플레이어가 금액을 배팅.
- split : 첫 드로우때 같은숫자의 카드가 2장이면 쪼개서 각각 진행할수 있다.
- hit : 카드를 더 받겠다
- stay : 카드받는것을 멈추겠다.
- double down : 배팅금을 두배로 걸고, 한장만 더 받겠다
- bust : 21이 넘어가서 패배확정
- blackjack : 첫카드2장이 21. 게임에서 가장 큰 숫자.
  + 본 게임에서는 블랙잭일 경우 배팅금액의 2배를 돌려준다. (보통 1.5배 1.2배)
- insurance : 배팅금의 반을 수수료로 넣고 블랙잭이면 본전치기, 아니면 수수로만 잃고 게임진행.
  
## 알고리즘
### 시스템상태
- `시스템상태변수`
- `MAINMENU("메인메뉴")` : 메인메뉴를 고르고 있는 상태
- `PLAYGAME("게임진행중")` : 현재 게임을 진행하고 있는 상태
- `LOADING("게임진입중")` : 처음에 게임들어가기전 화면 보여주고 있는 상태
### 게임상태
- `게임상태변수`
- `READY("대기상태")` : 게임 대기상태. 대기상태가 필요하면 쓰려고일단 만듬.(삭제가능성)
- `PLAYERBET("플레이어들배팅중")` : 플레이어(들)이 돌아가며 배팅한다.
  + 배팅하기`전` QUEUE에 플레이어를 넣고 꺼내서 배팅.
- `INITDEAL("플레이어들과딜러에게카드2장딜링")` : 배팅이 완료되면 P,D 둘다 2장씩 딜링.
  + 초기딜링이 완료되면 QUEUE에 (D,P1...3) 순서대로 넣어준다.
- `PLAY("게임진행중")` : Queue에서 P,D 를 꺼내어 게임진행. (삭제가능성)
- `PLAYERPLAY("플레이어들게임진행중")` : Queue에서 순서대로 꺼낸 플레이어(들) 게임진행
- `DEALERPLAY("딜러게임진행중")` : Queue에서 딜러를 꺼내 게임진행
- `RESULTCALC("게임결과계산")` : 딜러와 플레이어를 비교하여 결과를 계산한다.
  + `CALC("게임결과에맞춰금액을정산")` : 아마도 결과계산하며 정산까지 하지 않을까?
### 플레이어상태
- `플레이어상태변수`
- 블랙잭
- 버스트
- 스탠드
- split 채크
  + split 입력대기에 추가.
- hit/stand/double 입력대기.
- 버스트체크
  + 플레이어 버스트
  + 딜러 버스트
### 출력상태
- `출력상태변수`
- 입력맨트를 위한 출력
  + bet
  + hit/stay
  + hit/stay/split
- 게임진행 단일출력
- 게임진행 자동반복출력
  + 게임서비스와 관계없이 자동으로 반복할만한 부분이 있는가?
  + 매인화면밖에... 더생각해보자.
  
### 일단 만들면서.
- 만들면서 구조를 설계해보자.
#### 기술적 서브미션.
- 상수를 Enum으로 관리.
  + 싱글톤 개념이 들어간 상수.
- 플레이어당 게임을 진행하는 구조는 Stack을 이용하면 될것 같다.
- PlayMachine 을 만들어 하부 구조를 먼저 만든다

### CardDto의 구조.
  + `suit`문양 과 `denomination` 숫자로 이루어짐
  + `suit` 
    * ◆ Diamond
    * ♣ Clover
    * ♥ Heart
    * ♠ Spade
  + `denomination`
    * 숫자 2 ~ 9
    * 10(T), J, Q, K = 10 : 여기서는 10을 T로 표현해본다.
    * A = 1 or 11